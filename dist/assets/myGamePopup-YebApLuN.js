import{r as l,A as E,a as r,j as e,L as F}from"./index-Df47Ft6s.js";import{B as w,E as y}from"./boxContentPopup-C0kOp6E3.js";function Z({closePopup:R}){const[i,k]=l.useState("Recent"),v=l.useRef([]),[g,G]=l.useState({left:0,width:0}),[d,j]=l.useState({}),[f,b]=l.useState([]),[m,N]=l.useState([]),[p,C]=l.useState([]),{user:n}=l.useContext(E);l.useEffect(()=>{if(n){const t=r.get("favoriteGames");t&&b(JSON.parse(t));const s=r.get("likedGames");s&&N(JSON.parse(s));const a=r.get("recentGames");a&&C(JSON.parse(a))}},[n]);const S=t=>{const s=m.filter(a=>a.id!==t);N(s),r.set("likedGames",JSON.stringify(s),{expires:365})},L=t=>{const s=f.filter(a=>a.id!==t);b(s),r.set("favoriteGames",JSON.stringify(s),{expires:365})},M=t=>{const s=p.filter(a=>a.id!==t);C(s),r.set("recentGames",JSON.stringify(s),{expires:365})},u=(t,s)=>e.jsxs("div",{className:"relative max-h-[135px] flex",children:[e.jsxs(F,{to:`/game/${t.slug}`,"aria-label":`${t.title} game link`,className:"w-full h-full relative game-mygame rounded-lg overflow-hidden border-2 border-solid border-transparent hover:border-[rgb(104,66,255)]",children:[e.jsx("img",{src:t.thumbnail?`/image/game/thumbnail/${t.thumbnail}`:"https://via.placeholder.com/192x108?text=No+Image",alt:t.title||"Game image",className:"w-full h-full object-cover"}),e.jsx("h3",{className:"game-mygame-title text-sm font-medium mt-1 text-center",children:t.title||"Untitled"})]}),i==="Liked"&&e.jsx("button",{className:"absolute -top-2 right-0 text-xs text-white bg-red-500 px-2 py-1 rounded-[50%] cursor-pointer border-2 border-solid border-[#000]",onClick:()=>S(t.id),children:"X"}),i==="Favorites"&&e.jsx("button",{className:"absolute -top-2 right-0 text-xs text-white bg-red-500 px-2 py-1 rounded-[50%] cursor-pointer border-2 border-solid border-[#000]",onClick:()=>L(t.id),children:"X"}),i==="Recent"&&e.jsx("button",{className:"absolute -top-2 right-0 text-xs text-white bg-red-500 px-2 py-1 rounded-[50%] cursor-pointer border-2 border-solid border-[#000]",onClick:()=>M(t.id),children:"X"})]},`${t.id}-${s}`),h=[{name:"Recent",content:n?e.jsx("div",{className:"p-4 text-[#fff] grid grid-cols-2 gap-3",children:p.length>0?p.map(u):e.jsxs("div",{className:"col-span-2 flex items-center justify-center flex-col",children:[e.jsx("div",{className:"flex py-[16px]",children:e.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",className:"w-[120px] h-[120px] fill-[rgb(47,49,72)]",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 7C12.5523 7 13 7.44772 13 8V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V8C11 7.44772 11.4477 7 12 7Z"})})}),e.jsx("div",{className:"max-w-[80%] text-center text-[rgb(170,173,190)] text-[16px]",children:"All your recently played games will be listed here. Have some fun!"})]})}):e.jsxs("div",{className:"p-4 text-[#fff] flex items-center justify-center flex-col",children:[e.jsx("div",{className:"flex py-[16px]",children:e.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",className:"w-[120px] h-[120px] fill-[rgb(47,49,72)]",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 7C12.5523 7 13 7.44772 13 8V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V8C11 7.44772 11.4477 7 12 7Z"})})}),e.jsx("div",{className:"max-w-[80%] text-center text-[rgb(170,173,190)] text-[16px]",children:"All your recently played games will be listed here. Have some fun!"})]})},{name:"Favorites",content:n?e.jsx("div",{className:"p-4 text-[#fff] grid grid-cols-2 gap-3",children:f.length>0?f.map(u):e.jsx("div",{className:"text-center col-span-2 text-[rgb(170,173,190)]",children:"No favorite games yet."})}):e.jsxs("div",{className:"p-4 text-[#fff]",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-[16px]",children:e.jsx("h2",{className:"max-w-[70%] text-center text-[20px] font-[700]",children:"Create an account to add games to your favorites"})}),e.jsx(w,{}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsx(y,{})]})},{name:"Liked",content:n?e.jsx("div",{className:"p-4 text-[#fff] grid grid-cols-2 gap-3",children:m.length>0?m.map(u):e.jsx("div",{className:"text-center col-span-2 text-[rgb(170,173,190)]",children:"No liked games yet."})}):e.jsxs("div",{className:"p-4 text-[#fff]",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-[16px]",children:e.jsx("h2",{className:"max-w-[70%] text-center text-[20px] font-[700]",children:"Create an account to see all your liked games"})}),e.jsx(w,{}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsx(y,{})]})}];l.useEffect(()=>{const t=h.findIndex(a=>a.name===i),s=v.current[t];s&&G({left:s.offsetLeft,width:s.offsetWidth})},[i]);const $=(t,s)=>{const c=t.currentTarget.getBoundingClientRect(),o=t.clientX-c.left,O=t.clientY-c.top;j(x=>({...x,[s]:{x:o,y:O,active:!0}})),k(s),setTimeout(()=>{j(x=>({...x,[s]:{...x[s],active:!1}}))},600)};return e.jsx("div",{className:"w-[400px] bg-[rgb(26,27,40)] h-[calc(100vh-76px)] absolute z-20 top-[8px] right-[8px] rounded-[10px] overflow-hidden",children:e.jsxs("div",{className:"w-full h-full",children:[e.jsx("div",{className:"h-[60px] text-[16px] font-[600] text-[#fff] flex items-center justify-center",children:"My Games"}),e.jsx("button",{className:"absolute right-[24px] top-[16px] cursor-pointer group",onClick:R,children:e.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",className:"w-[24px] h-[24px] fill-[#fff] group-hover:fill-[rgba(170,173,190,80%)] transition-all duration-300 ease-in-out",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29289 4.29289..."})})}),e.jsx("div",{className:"w-full flex justify-center items-center relative",children:e.jsxs("div",{className:"flex relative",children:[h.map((t,s)=>{var a,c;return e.jsx("button",{ref:o=>v.current[s]=o,className:`relative px-[16px] py-[12px] font-[700] text-[14px] transition-all duration-200 max-w-[360px] min-w-[114px] glow-button ${i===t.name?"text-[#fff]":"bg-transparent text-[rgb(102,106,127)] hover:text-[rgb(135,138,158)]"} ${(a=d[t.name])!=null&&a.active?"glow-active":""}`,onClick:o=>$(o,t.name),style:(c=d[t.name])!=null&&c.active?{"--glow-x":`${d[t.name].x}px`,"--glow-y":`${d[t.name].y}px`}:{},children:t.name},t.name)}),e.jsx("div",{className:"absolute bottom-0 h-[2px] bg-[rgb(104,66,255)] transition-all duration-300 ease-in-out",style:{left:g.left,width:g.width}})]})}),e.jsx("hr",{className:"h-[0.5px] text-[rgb(102,106,127)] w-[97%]"}),e.jsx("div",{className:"w-full h-[calc(100%-100px)] overflow-y-auto",children:h.map(t=>i===t.name&&e.jsx("div",{children:t.content},t.name))})]})})}export{Z as default};
